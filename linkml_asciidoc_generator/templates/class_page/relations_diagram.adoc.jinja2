[d2,svg,theme=4]
----
vars: {
  d2-config: {
    pad: 20
  }
}
{{ class_.name }} {
  style {
    fill: "{{ color_class(class_) }}"
    shadow: true
  }
}

{% for related_class in class_.relations | map(attribute="destination_class") %}
{{ related_class.name }} {
  style {
    fill: "{{ color_class(related_class) }}"
    shadow: true
  }
}
{% endfor %}

{% for relation in class_.relations -%}
{{ class_.name }} -> {{ relation.destination_class.name }}: {{ relation.name }}
{% endfor %}

legend: "" {
  style: {
    fill: transparent
    stroke: transparent
  }
  grid-rows: 3
  grid-columns: 2
  grid-gap: 10
  near: bottom-right
  iec61968_color: "" {
    style: {
      fill: "#d1e7c2"
      stroke: black
      stroke-width: 1
    }
    width: 10
    height: 10
  }
  iec61968_text: "IEC61968 (Enterprise)" {
    shape: text
  }
  iec61970_color: "" {
    style: {
      fill: "#eccfcb"
      stroke: black
      stroke-width: 1
    }
    width: 10
    height: 10
  }
  iec61970_text: "IEC61970 (Grid)" {
    shape: text
  }
  iec62325_color: "" {
    style: {
      fill: "#fffbef"
      stroke: black
      stroke-width: 1
    }
    width: 10
    height: 10
  }
  iec62325_text: "IEC62325 (Market)" {
    shape: text
  }
}
----
